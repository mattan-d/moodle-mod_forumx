define(["jquery"],function(a){var b={available:!1,pageParams:"",pageParamsArray:{},path:{addpost:"/vp/forumx/addpost/postid=",adddiscussion:"/vp/forumx/adddiscussion/discussionid="}},c=function(){b.available="function"==typeof ga,b.available&&ga(function(c){var d=c.get("page"),e=d.indexOf("?");if(-1==e&&(e=d.indexOf("&")),e>-1&&(b.pageParams=d.substr(e+1),b.pageParams.length>0)){var f=b.pageParams.split("&");a.each(f,function(a,c){var d=c.split("=");b.pageParamsArray[d[0]]=d[1]}),b.pageParams="&"+b.pageParams}})},d=function(a,c){b.available&&"undefined"!=typeof b.path[a]&&ga("send","pageview",b.path[a]+c+b.pageParams)},e=function(c){b.available&&(a.each(c,function(a,c){var d=trim(c);d.length>0&&(b.pageParamsArray[a]=c)}),g())},f=function(c){b.available&&(a.each(c,function(a,c){delete b.pageParamsArray[c]}),g())},g=function(){b.pageParams="&"+a.param(b.pageParamsArray),1==b.pageParams.length&&(b.pageParams="")};return{init:function(){c()},hasGA:function(){return b.available},setParams:function(a){e(a)},removeParams:function(a){f(a)},send:function(a,b){d(a,b)}}});